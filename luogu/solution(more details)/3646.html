<!DOCTYPE html>
<!-- saved from url=(0050)https://www.luogu.com.cn/problemnew/solution/P3646 -->
<html class="js cssanimations translated-ltr" lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style id="ace_editor.css">.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;perspective: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_text-input-ios {position: absolute !important;top: -100000px !important;left: -100000px !important;}
/*# sourceURL=ace/css/ace_editor.css */</style>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>P3646 [APIO2015]巴厘島的雕塑題解- 洛谷| 計算機科學教育新生態</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta name="csrf-token" content="1580832853:TGZwcHiRV3wjDzBZjOlTAvTOEPGh/exV0j47MQwlBEw=">
        <link rel="stylesheet" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/amazeui.min.css">
    <link rel="stylesheet" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/katex.min.css">
    <link rel="stylesheet" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/luogu3.css">
    <link rel="stylesheet" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/highlight_tomorrow.css">
    <link rel="stylesheet" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/markdown-palettes.css">
    <script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/jquery-2.1.1.min.js"></script>
    <script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/luogu3_pre.js"></script>

    <link rel="shortcut icon" type="image/x-icon" href="https://www.luogu.com.cn/favicon.ico" media="screen">
    <link rel="stylesheet" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/loader.css">
    <script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentUser%22%3Anull%2C%22currentTemplate%22%3A%22Excited%22%2C%22currentData%22%3A%7B%22shortHeader%22%3Afalse%2C%22pageName%22%3A%22%5Cu67e5%5Cu770b%5Cu9898%5Cu89e3%22%2C%22title%22%3A%22P3646%20%5BAPIO2015%5D%5Cu5df4%5Cu5398%5Cu5c9b%5Cu7684%5Cu96d5%5Cu5851%20%5Cu9898%5Cu89e3%22%7D%7D"));window._feConfigVersion=1580605522;</script>
    <script>window._release = '20200201';</script>
    <script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/loader.js" charset="utf-8" defer=""></script>
<link rel="stylesheet" type="text/css" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/module.182.faf61e1c90d144f39cfe.css"><script charset="utf-8" src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/module.182.faf61e1c90d144f39cfe.js"></script><style type="text/css">.top-progress[data-v-774e75a0]{position:fixed;right:0;left:0;height:4px;overflow:hidden;z-index:99}.bar[data-v-774e75a0]{height:100%;border-top-right-radius:2px;border-bottom-right-radius:2px;transition:width .2s ease;opacity:1;animation:loading-progress-data-v-774e75a0 10s cubic-bezier(.22,.86,0,.8);animation-fill-mode:forwards}.done[data-v-774e75a0]{animation:none;opacity:0;width:100%;transition:opacity .2s ease .2s}@keyframes loading-progress-data-v-774e75a0{from{width:5%}to{width:99%}}</style><style type="text/css">nav[data-v-27b2cd59]{position:fixed;width:3.7em;height:100%;display:flex;flex-direction:column;text-align:center;line-height:1.2;z-index:5}.logo-wrap[data-v-27b2cd59]{display:block;box-sizing:border-box;padding:1em;width:3.7em;text-align:center;height:4em;overflow:hidden;outline:0}.logo-wrap>img[data-v-27b2cd59]{max-width:100%;max-height:100%}.user-nav[data-v-27b2cd59]{display:none;height:3.4em;align-items:center;background:rgba(255,255,255,.5);border-radius:1em;margin:.3em;padding:0 .8em}</style><style type="text/css">a[data-v-cd9b963e]{display:block;padding:.5em .5em;text-decoration:none}.icon[data-v-cd9b963e]{text-align:center;margin:0 .3em;font-size:1.1em;display:inline-block;width:1.5em;vertical-align:middle}.text[data-v-cd9b963e]{font-size:.8em;vertical-align:middle}</style><style type="text/css">a[data-v-445f91a0]{text-decoration:none}a.color-none[data-v-445f91a0]:hover{text-decoration:none}.color-header[data-v-445f91a0]{color:#bbb}.color-header[data-v-445f91a0]:hover{color:#fff}.color-default[data-v-445f91a0],.color-default-noline[data-v-445f91a0]{color:#3498db}.color-default-noline[data-v-445f91a0]:hover,.color-default[data-v-445f91a0]:hover{color:#0056b3}a.color-default-noline[data-v-445f91a0]:hover{text-decoration:none}.color-title[data-v-445f91a0]{color:#666}.color-title[data-v-445f91a0]:hover{color:#5bc0de}</style><style id="poshytip-css-tip-twitter" type="text/css">div.tip-twitter{visibility:hidden;position:absolute;top:0;left:0;}div.tip-twitter table.tip-table, div.tip-twitter table.tip-table td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;vertical-align:middle;}div.tip-twitter td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:10px;width:10px;overflow:hidden;}div.tip-twitter td.tip-right{background-position:100% 0;}div.tip-twitter td.tip-bottom{background-position:100% 100%;}div.tip-twitter td.tip-left{background-position:0 100%;}div.tip-twitter div.tip-inner{background-position:-10px -10px;}div.tip-twitter div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}</style><style type="text/css">.header[data-v-52820d90]{color:#fff}h1[data-v-52820d90]{margin-top:.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.bread-crumb[data-v-52820d90]{padding-top:1.5em;font-size:.8em;color:#aaa}.user-nav[data-v-52820d90]{position:absolute;right:4em;top:0;padding:.5em 1em;color:#333;background-color:rgba(255,255,255,.5);border-bottom-left-radius:5px;border-bottom-right-radius:5px}.functional[data-v-52820d90]{padding-top:.8em}.operation[data-v-52820d90]{display:flex;align-items:baseline;color:#fff}.stat[data-v-52820d90]{float:right}@media (max-width:576px){.user-nav[data-v-52820d90]{display:none}.bread-crumb[data-v-52820d90]{font-size:.875em}.stat[data-v-52820d90]{float:left}.functional[data-v-52820d90]{display:flex;flex-direction:column;padding-top:0}.operation[data-v-52820d90]{margin-top:1em;margin-bottom:1em;display:flex;flex-direction:column}.operation>*[data-v-52820d90]{width:100%;margin-bottom:.5em}}</style><style type="text/css">nav[data-v-019a82aa]::after{content:" ";white-space:pre}.link[data-v-019a82aa],.text[data-v-019a82aa]{color:rgba(255,255,255,.75)}.link[data-v-019a82aa]:hover{color:rgba(255,255,255,1)}</style><link type="text/css" rel="stylesheet" charset="UTF-8" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/translateelement.css"></head>
<body>
<div data-v-be2136da="" id="app"><div data-v-774e75a0="" data-v-be2136da="" class="top-progress"><div data-v-774e75a0="" class="bar done" style="background: rgb(52, 152, 219);"></div></div> <nav data-v-27b2cd59="" data-v-6a236743="" data-v-be2136da="" class="lfe-body" style="background-color: rgb(52, 73, 94); color: rgb(221, 221, 221);"><div data-v-27b2cd59="" style="background-color: rgb(52, 152, 219);"><a data-v-27b2cd59="" href="https://www.luogu.com.cn/" class="logo-wrap"><img data-v-27b2cd59="" src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/logo-single.png" alt="Luogu"></a></div>  <div data-v-6a236743="" data-v-27b2cd59="" class="popup-button"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      應用 </font></font><svg data-v-6a236743="" data-v-27b2cd59="" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-double-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-angle-double-right fa-w-14"><path data-v-6a236743="" data-v-27b2cd59="" fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z" class=""></path></svg> <!----></div> <a data-v-445f91a0="" data-v-cd9b963e="" data-v-6a236743="" href="https://www.luogu.com.cn/problem/list" class="color-none" data-v-27b2cd59="" style="color: inherit;"><span data-v-cd9b963e="" data-v-445f91a0="" class="icon"><svg data-v-cd9b963e="" data-v-445f91a0="" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="book" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-book fa-w-14"><path data-v-cd9b963e="" data-v-445f91a0="" fill="currentColor" d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z" class=""></path></svg></span> <span data-v-cd9b963e="" data-v-445f91a0="" class="text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      題庫
     </font></font></span></a> <font style="vertical-align: inherit;"><a data-v-445f91a0="" data-v-cd9b963e="" data-v-6a236743="" href="https://www.luogu.com.cn/training/mainpage" class="color-none" data-v-27b2cd59="" style="color: inherit;"><span data-v-cd9b963e="" data-v-445f91a0="" class="text"><font style="vertical-align: inherit;">
      訓練
     </font></span></a><a data-v-445f91a0="" data-v-cd9b963e="" data-v-6a236743="" href="https://www.luogu.com.cn/contest/list" class="color-none" data-v-27b2cd59="" style="color: inherit;"><span data-v-cd9b963e="" data-v-445f91a0="" class="text"><font style="vertical-align: inherit;">
      比賽
     </font></span></a><a data-v-445f91a0="" data-v-cd9b963e="" data-v-6a236743="" href="https://www.luogu.com.cn/discuss/lists" class="color-none" data-v-27b2cd59="" style="color: inherit;"><span data-v-cd9b963e="" data-v-445f91a0="" class="text"><font style="vertical-align: inherit;">
      討論
    </font></span></a></font><a data-v-445f91a0="" data-v-cd9b963e="" data-v-6a236743="" href="https://www.luogu.com.cn/training/mainpage" class="color-none" data-v-27b2cd59="" style="color: inherit;"><span data-v-cd9b963e="" data-v-445f91a0="" class="icon"><svg data-v-cd9b963e="" data-v-445f91a0="" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="lightbulb" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" class="svg-inline--fa fa-lightbulb fa-w-11"><path data-v-cd9b963e="" data-v-445f91a0="" fill="currentColor" d="M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z" class=""></path></svg></span> <span data-v-cd9b963e="" data-v-445f91a0="" class="text"><font style="vertical-align: inherit;"></font></span></a> <a data-v-445f91a0="" data-v-cd9b963e="" data-v-6a236743="" href="https://www.luogu.com.cn/contest/list" class="color-none" data-v-27b2cd59="" style="color: inherit;"><span data-v-cd9b963e="" data-v-445f91a0="" class="icon"><svg data-v-cd9b963e="" data-v-445f91a0="" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="signal" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="svg-inline--fa fa-signal fa-w-20"><path data-v-cd9b963e="" data-v-445f91a0="" fill="currentColor" d="M216 288h-48c-8.84 0-16 7.16-16 16v192c0 8.84 7.16 16 16 16h48c8.84 0 16-7.16 16-16V304c0-8.84-7.16-16-16-16zM88 384H40c-8.84 0-16 7.16-16 16v96c0 8.84 7.16 16 16 16h48c8.84 0 16-7.16 16-16v-96c0-8.84-7.16-16-16-16zm256-192h-48c-8.84 0-16 7.16-16 16v288c0 8.84 7.16 16 16 16h48c8.84 0 16-7.16 16-16V208c0-8.84-7.16-16-16-16zm128-96h-48c-8.84 0-16 7.16-16 16v384c0 8.84 7.16 16 16 16h48c8.84 0 16-7.16 16-16V112c0-8.84-7.16-16-16-16zM600 0h-48c-8.84 0-16 7.16-16 16v480c0 8.84 7.16 16 16 16h48c8.84 0 16-7.16 16-16V16c0-8.84-7.16-16-16-16z" class=""></path></svg></span> <span data-v-cd9b963e="" data-v-445f91a0="" class="text"><font style="vertical-align: inherit;"></font></span></a> <!----> <a data-v-445f91a0="" data-v-cd9b963e="" data-v-6a236743="" href="https://www.luogu.com.cn/discuss/lists" class="color-none" data-v-27b2cd59="" style="color: inherit;"><span data-v-cd9b963e="" data-v-445f91a0="" class="icon"><svg data-v-cd9b963e="" data-v-445f91a0="" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="comments" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg-inline--fa fa-comments fa-w-18"><path data-v-cd9b963e="" data-v-445f91a0="" fill="currentColor" d="M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z" class=""></path></svg></span> <span data-v-cd9b963e="" data-v-445f91a0="" class="text"><font style="vertical-align: inherit;"></font></span></a></nav> <div data-v-be2136da="" class="main-container"><div data-v-7958fe72="" data-v-be2136da="" class="wrapper wrapped lfe-body header-layout narrow"><div data-v-7958fe72="" class="background" style="background: linear-gradient(90deg, rgb(35, 37, 38), rgb(65, 67, 69)); filter: blur(0px) brightness(100%);"></div> <div data-v-52820d90="" data-v-f1a16d7e="" data-v-be2136da="" class="header" currentdata="[object Object]" data-v-7958fe72=""><div data-v-52820d90="" class="user-nav"><nav data-v-4346566c="" data-v-52820d90=""><div data-v-034eb354="" data-v-4346566c=""><div data-v-034eb354="" class="search-wrap"><input data-v-034eb354="" type="text"></div> <a data-v-445f91a0="" data-v-034eb354="" href="javascript:void 0" class="icon color-none"><svg data-v-034eb354="" data-v-445f91a0="" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-search fa-w-16"><path data-v-034eb354="" data-v-445f91a0="" fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z" class=""></path></svg></a></div> <a data-v-445f91a0="" data-v-4346566c="" href="https://www.luogu.com.cn/auth/login" class="login color-none"><span data-v-4346566c="" data-v-445f91a0=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登錄</font></font></span></a> <a data-v-445f91a0="" data-v-4346566c="" href="https://www.luogu.com.cn/auth/register" class="login color-none"><span data-v-4346566c="" data-v-445f91a0=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">註冊</font></font></span></a> <img data-v-4346566c="" src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/1.png" class="avatar"></nav></div> <nav data-v-019a82aa="" data-v-52820d90="" class="lfe-caption bread-crumb"><span data-v-019a82aa=""><a data-v-445f91a0="" data-v-019a82aa="" href="https://www.luogu.com.cn/" class="link color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">洛谷</font></font></a> <span data-v-019a82aa="" class="text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font></span></span><span data-v-019a82aa=""><span data-v-019a82aa="" class="text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">題目列表</font></font></span> <span data-v-019a82aa="" class="text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font></span></span><span data-v-019a82aa=""><span data-v-019a82aa="" class="text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">題目詳情</font></font></span> <span data-v-019a82aa="" class="text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font></span></span><span data-v-019a82aa=""><span data-v-019a82aa="" class="text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看題解</font></font></span> <!----></span></nav> <h1 data-v-52820d90="" class="lfe-h1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P3646 [APIO2015]巴厘島的雕塑題解</font></font></h1> <div data-v-52820d90="" class="functional"><div data-v-52820d90="" class="stat"></div> <div data-v-52820d90="" class="operation"></div></div></div></div> <main data-v-be2136da="" class="lfe-body" style="background-color: rgb(239, 239, 239);"><!----><div id="app-old">

    <style>
        .voted {
            color: #0a628f;
        }
        .vote {
            cursor: pointer;
        }
        .fadeout {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 6em;
            background-image: linear-gradient(
                    rgba(255, 255, 255, 0) 0%,
                    rgba(255, 255, 255, 1) 90%
            );
        }
        .comment-show-more {
            position: absolute;
            text-align: center;
            bottom: 0;
            left: 0;
            right: 0;
            margin-left: auto;
            margin-right: auto;
            color: rgba(14, 144, 210, 0.7);
        }
    </style>
    <div class="lg-toolbar" data-am-sticky="" style="margin: 0px;">
        <h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P3646 [APIO2015]巴厘島的雕塑題解</font></font></h1>
    </div>
    <div class="am-g lg-main-content">
        <div class="am-u-md-4 am-u-lg-3 lg-right am-hide-sm">
            <section class="am-panel am-panel-default lg-summary" style="padding-bottom: 16px;">
                <div class="lg-summary-content">
                    <ul class="am-list am-list-static lg-summary-list">
                        <li>
                            <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">題目</font></font></strong>
                            <span class="lg-right"><a class="colored" href="https://www.luogu.com.cn/problemnew/show/P3646" target="_blank"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P3646</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [APIO2015]巴厘島的雕塑</font></font></a></span>
                        </li>
                        <li>
                            <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">總數量</font></font></strong>
                            <span class="lg-right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7篇</font></font></span>
                        </li>
                    </ul><br>
                                                                                </div>
            </section>
        </div>
        <div class="am-u-md-8 am-u-lg-9 lg-right">
            <div class="lg-content-left">
                <div class="lg-article am-g">
                    <h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下題解僅供學習參考使用。</font></font></b></h2>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抄襲、複製題解，以達到刷AC率/AC數量或其他目的的行為，在洛谷是嚴格禁止的。</font></font></p>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">洛谷非常重視</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">學術誠信</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此類行為將會導致您成為</font></font><b class="lg-fg-brown"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作弊者</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">具體細則請查看</font></font><a href="https://www.luogu.com.cn/blog/luogu/social-rules"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">洛谷社區規則</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
                </div>
            </div>
        </div>
    </div>
                    <div class="am-g lg-main-content solution-block" data-blog-id="71618">
            <div class="am-u-md-4 am-u-lg-3 lg-right am-hide-sm">
                <section class="am-panel am-panel-default lg-summary">
                    <div class="lg-summary-content">
                        <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            評論
                            </font></font><span class="lg-right">
                                <a class="comment-page-switch" data-forward="-1"><i class="am-icon-chevron-left" style="display: none;"></i></a>
                                <a class="comment-page-switch" data-forward="1"><i class="am-icon-chevron-right" style="display: none;"></i></a>
                            </span>
                        </h2>
                        <ul class="am-list am-list-static am-list-border am-list-striped" style="position: relative;" data-comment-count="7">
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不許雷同</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    太強了大佬，波波波
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tuliwei</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    太強了大佬，TQL
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tuliwei</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    太強了大佬％％％
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tuliwei</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    太強了大佬６６６
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tuliwei</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    太強了大佬Ｏｒｚ
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yqtwrz​​w</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    太強了大佬肽聚
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">範高源</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    樓上的樓上裂開了
                                </font></font></li>
                                                                                    <div class="fadeout" style="display: none;">
                                <div class="comment-show-more"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 展開更多</font></font></div>
                            </div>
                        </ul>
                                            </div>
                </section>
            </div>
            <div class="am-u-md-8 am-u-lg-9 lg-right">
                <div class="lg-content-left">
                    <div class="lg-article am-g" style="min-height: 350px;">
                        <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作者: </font></font><a class="lg-fg-bluelight" href="https://www.luogu.com.cn/user/30725" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打臉不疼</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                            更新時間: 2018-09-29 21:53
                         </font></font></span>
                        <a class="lg-small" href="https://www.luogu.com.cn/blog/HJW666/solution-p3646" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;在Ta的博客查看</font></font></a>
                        <a class="lg-small" style="cursor:pointer" name="report" data-report-id="71618"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            舉報
                         </font></font></a>

                        <font style="vertical-align: inherit;"><span data-blog-id="71618" class="lg-right vote-count"><font style="vertical-align: inherit;">10</font></span></font><span data-blog-id="71618" data-vote-value="-1" class="thumb-down am-icon-thumbs-o-down lg-right vote ">
                        </span>
                        <span class="lg-right">&nbsp;&nbsp;</span>
                        <span data-blog-id="71618" class="lg-right vote-count"><font style="vertical-align: inherit;"></font></span>
                        <span class="lg-right">&nbsp;</span>
                        <span data-blog-id="71618" data-vote-value="1" class="thumb-up am-icon-thumbs-o-up lg-right vote ">
                        </span>
                        <hr>
                        <h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本蒟蒻第一次水題解</font></font></h1>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">希望管理員大大給過</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今天剛好考了這題， 在考場上寫了個樸素的DP，結果數據太水，得了80分，知道洛谷上有這題， 來試水，結果出乎意料，錯誤的DP竟然有90分（haha）， 下面是醜陋的代碼：</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>, f = <span class="hljs-number">1</span>; <span class="hljs-keyword">char</span> ch = getchar();
    <span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch)) (ch == <span class="hljs-string">'-'</span>) &amp;&amp; (f = <span class="hljs-number">-1</span>), ch = getchar();
    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)) x = (x &lt;&lt; <span class="hljs-number">1</span>) + (x &lt;&lt; <span class="hljs-number">3</span>) + (ch ^ <span class="hljs-number">48</span>), ch = getchar();
    <span class="hljs-keyword">return</span> x * f;<font></font>
}<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> N 2005</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ll long long</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> reg register</span>
<span class="hljs-keyword">int</span> n, A, B;<font></font>
ll f[N][N];<font></font>
ll ans = <span class="hljs-number">0</span>, res = <span class="hljs-number">0</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">//freopen("sculpture.in", "r", stdin);</span>
    <span class="hljs-comment">//freopen("sculpture.out", "w", stdout);</span><font></font>
    n = read(), A = read(), B = read();<font></font>
    <span class="hljs-keyword">for</span>(reg <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++){
        <span class="hljs-keyword">for</span>(reg <span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt;= B; j++)<font></font>
            f[i][j] = <span class="hljs-number">9999999999999</span>;<font></font>
    }<font></font>
    f[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(reg <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<font></font>
        f[i][<span class="hljs-number">1</span>] = (ll)(read() + f[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">for</span>(reg <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)
        <span class="hljs-keyword">for</span>(reg <span class="hljs-keyword">int</span> k = <span class="hljs-number">2</span>; k &lt;= min(i, B); k++)
            <span class="hljs-keyword">for</span>(reg <span class="hljs-keyword">int</span> j = i - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">1</span>; j--)
                <span class="hljs-keyword">if</span>(f[i][<span class="hljs-number">1</span>] - f[j][<span class="hljs-number">1</span>] &gt; f[i][k])<span class="hljs-keyword">break</span>;<span class="hljs-comment">//玄学剪枝，O(n^3) 超时不存在的 </span>
                <span class="hljs-keyword">else</span> f[i][k] = min(f[i][k], f[j][k - <span class="hljs-number">1</span>] | (f[i][<span class="hljs-number">1</span>] - f[j][<span class="hljs-number">1</span>]));<font></font>
    ll ans = <span class="hljs-number">9999999999999</span>;
    <span class="hljs-keyword">for</span>(reg <span class="hljs-keyword">int</span> i = A; i &lt;= B; i++){<font></font>
        ans = min(f[n][i], ans);<font></font>
    }<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, ans);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">為什麼錯？</font><font style="vertical-align: inherit;">因為前一個分段的最小優美值與後一個分段的值或運算起來不一定是最小的答案，這個可以自己思考一下。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那咋搞， 本蒟蒻自己當然想不出。</font><font style="vertical-align: inherit;">聽大佬說是數位DP，本蒟蒻當然不會，自己馬上查了資料，借鑒Cao某的代碼和Only_xiaohuang的解釋，終於打出了這題，自己想的成分（0%）；</font></font></p>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正片</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所謂數位DP就是逐個數位考慮，一般運用於二進制運算這樣的題。</font><font style="vertical-align: inherit;">不太懂得自行百度。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先看到這個題，很顯然我們要找到一個解使得二進制高位上的數為0。</font><font style="vertical-align: inherit;">我們就可以從高位到低位逐位考慮這一位是否為0的情況。</font><font style="vertical-align: inherit;">我們令分bool f[i][j] 前i個數分成j段的當前數位能否為0，能為0則為true， 不能則為false； 那麼我們每枚舉一個數位就要DP一次，第一層循環代碼如下</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ll long long</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> N 2005</span>
<span class="hljs-keyword">bool</span> f[N][N];
<span class="hljs-function">ll <span class="hljs-title">solve1</span><span class="hljs-params">()</span></span>{<font></font>
    ll ans = <span class="hljs-number">0</span>, res = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> maxn = log2(sum) + <span class="hljs-number">1</span>;<span class="hljs-comment">//sum为每一个Y的和，这是确定枚举的最高位</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = maxn; i &gt;= <span class="hljs-number">0</span>; i--){<font></font>
        res = ans | ((<span class="hljs-number">1L</span>L &lt;&lt; i) - <span class="hljs-number">1L</span>L);
        <span class="hljs-built_in">memset</span>(f, <span class="hljs-literal">false</span>, <span class="hljs-keyword">sizeof</span>(f));<span class="hljs-comment">//每次枚举都要清空</span>
        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;<span class="hljs-comment">//初始值</span><font></font>
        .<font></font>
        .<font></font>
        .<font></font>
        <span class="hljs-keyword">bool</span> flag = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = A; j &lt;= B; j++){<span class="hljs-comment">//枚举分A到B段的所有情况</span>
            <span class="hljs-keyword">if</span>(f[n][j]){<font></font>
                flag = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span>(!flag)ans |= (<span class="hljs-number">1L</span>L &lt;&lt; i);<span class="hljs-comment">//不可以放0则只能放1</span><font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> ans;<font></font>
}</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那麼res，ans分別是什麼呢？</font><font style="vertical-align: inherit;">ans比較好理解，假如當前枚舉的數位不能放0，那就把ans二進制下的第i位改為1，最後得到的ans值就是最後的答案。</font><font style="vertical-align: inherit;">那麼res呢，這裡是仿照Cao某的方法，假如ans（二進制） = 1101 0000，枚舉到第四位，那麼res = 1101 0111，也就是把第四位扣下來，再把後面每一位附為1，這裡就是假設這一位為0，這樣做是為了下面的狀態轉移。</font><font style="vertical-align: inherit;">那麼最重要的來了，f數組的狀態轉移：</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++){<span class="hljs-comment">//枚举第几个数</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = <span class="hljs-number">1</span>; k &lt;= min(j, B); k++){<span class="hljs-comment">//分段数</span>
        ll s = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> t = j - <span class="hljs-number">1</span>; t &gt;= k - <span class="hljs-number">1</span>; t--){<span class="hljs-comment">//枚举分段位置</span>
            s += d[t + <span class="hljs-number">1</span>];<span class="hljs-comment">//s表示t+1~j的Y的和</span>
            <span class="hljs-keyword">if</span>(f[t][k - <span class="hljs-number">1</span>] &amp;&amp; ((s | res) == res)){<font></font>
                f[j][k] = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">為什麼(f[t][k - 1] &amp;&amp; ((s | res) == res))成立，則f[j][k]便可以為真？</font><font style="vertical-align: inherit;">； (s | res) == res 表示s二進制上的每一個1的位置，在res上也為1，那麼當前面一段的值或上s時並不會影響之前的答案，且當前枚舉的數位上可以為0，那麼只要f[t][k - 1],也就是1~t中分k - 1段這一位上可以為0，那麼f[j][k]的這一位上也能為0； 那就很簡單了，完整代碼如下</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ll long long</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> N 2005</span>
<span class="hljs-keyword">bool</span> f[N][N];
<span class="hljs-function">ll <span class="hljs-title">solve1</span><span class="hljs-params">()</span></span>{<font></font>
    ll ans = <span class="hljs-number">0</span>, res = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> maxn = log2(sum) + <span class="hljs-number">1</span>;<span class="hljs-comment">//sum为每一个Y的和，这是确定枚举的最高位</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = maxn; i &gt;= <span class="hljs-number">0</span>; i--){<font></font>
        res = ans | ((<span class="hljs-number">1L</span>L &lt;&lt; i) - <span class="hljs-number">1L</span>L);
        <span class="hljs-built_in">memset</span>(f, <span class="hljs-literal">false</span>, <span class="hljs-keyword">sizeof</span>(f));<span class="hljs-comment">//每次枚举都要清空</span>
        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;<span class="hljs-comment">//初始值</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++){<span class="hljs-comment">//枚举第几个数</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = <span class="hljs-number">1</span>; k &lt;= min(j, B); k++){<span class="hljs-comment">//分段数</span>
                ll s = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> t = j - <span class="hljs-number">1</span>; t &gt;= k - <span class="hljs-number">1</span>; t--){<span class="hljs-comment">//枚举分段位置</span>
                    s += d[t + <span class="hljs-number">1</span>];<span class="hljs-comment">//s表示t+1~j的Y的和</span>
                    <span class="hljs-keyword">if</span>(f[t][k - <span class="hljs-number">1</span>] &amp;&amp; ((s | res) == res)){<font></font>
                        f[j][k] = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">bool</span> flag = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = A; j &lt;= B; j++){<span class="hljs-comment">//枚举分A到B段的所有情况</span>
            <span class="hljs-keyword">if</span>(f[n][j]){<font></font>
                flag = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span>(!flag)ans |= (<span class="hljs-number">1L</span>L &lt;&lt; i);<span class="hljs-comment">//不可以放0则只能放1</span><font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> ans;<font></font>
}</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可是這樣做只能得80分，原因是太慢了，四個for套在一起不超時才怪。</font><font style="vertical-align: inherit;">那怎麼辦，從數據入手，發現所有的大樣例都有特殊性質，A = 1。</font><font style="vertical-align: inherit;">前面的代碼是因為枚舉了分段數，因為要保證正確的解分段數大於等於A， 防止最優解小於A，但A = 1的話就不需要考慮，只需保證最優解小於等於B就行了。</font><font style="vertical-align: inherit;">用g數組表示，前j個數分段使得當前數位為0所需的最小分段數， 很容易想到如何轉移：</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-keyword">if</span>((s | res) == res)<font></font>
     g[j] = min(g[j], g[k] + <span class="hljs-number">1</span>);</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整代碼與原函數類似：</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-function">ll <span class="hljs-title">solve2</span><span class="hljs-params">()</span></span>{<font></font>
    ll ans = <span class="hljs-number">0</span>, res = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> maxn = log2(sum) + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = maxn; i &gt;= <span class="hljs-number">0</span>; i--){<font></font>
        res = ans | ((<span class="hljs-number">1L</span>L &lt;&lt; i) - <span class="hljs-number">1L</span>L);
        <span class="hljs-built_in">memset</span>(g, <span class="hljs-number">127</span>, <span class="hljs-keyword">sizeof</span>(g));<font></font>
        g[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++){<font></font>
            ll s = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = j - <span class="hljs-number">1</span>; k &gt;= <span class="hljs-number">0</span>; k--){<font></font>
                s += d[k + <span class="hljs-number">1</span>];
                <span class="hljs-keyword">if</span>((s | res) == res)<font></font>
                    g[j] = min(g[j], g[k] + <span class="hljs-number">1</span>);<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span>(g[n] &gt; B) ans |= (<span class="hljs-number">1L</span>L &lt;&lt; i);<span class="hljs-comment">//如果得到0的最小分段数大于B，那么这一位只能为1</span><font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> ans;<font></font>
}</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">這道題就這樣完美的解決了；</font></font></p>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真完整代碼如下</font></font></h5>
<pre><code class="language-cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>, f = <span class="hljs-number">1</span>; <span class="hljs-keyword">char</span> ch = getchar();
    <span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch)) (ch == <span class="hljs-string">'-'</span>) &amp;&amp; (f = <span class="hljs-number">-1</span>), ch = getchar();
    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)) x = (x &lt;&lt; <span class="hljs-number">1</span>) + (x &lt;&lt; <span class="hljs-number">3</span>) + (ch ^ <span class="hljs-number">48</span>), ch = getchar();
    <span class="hljs-keyword">return</span> x * f;<font></font>
}<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> N 2005</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ll long long</span>
<span class="hljs-keyword">int</span> n, A, B, g[N];<font></font>
ll d[N], sum;<font></font>
<span class="hljs-keyword">bool</span> f[N][N];
<span class="hljs-function">ll <span class="hljs-title">solve1</span><span class="hljs-params">()</span></span>{<font></font>
    ll ans = <span class="hljs-number">0</span>, res = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> maxn = log2(sum) + <span class="hljs-number">1</span>;<span class="hljs-comment">//sum为每一个Y的和，这是确定枚举的最高位</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = maxn; i &gt;= <span class="hljs-number">0</span>; i--){<font></font>
        res = ans | ((<span class="hljs-number">1L</span>L &lt;&lt; i) - <span class="hljs-number">1L</span>L);
        <span class="hljs-built_in">memset</span>(f, <span class="hljs-literal">false</span>, <span class="hljs-keyword">sizeof</span>(f));<span class="hljs-comment">//每次枚举都要清空</span>
        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;<span class="hljs-comment">//初始值</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++){<span class="hljs-comment">//枚举第几个数</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = <span class="hljs-number">1</span>; k &lt;= min(j, B); k++){<span class="hljs-comment">//枚举分段数</span>
                ll s = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> t = j - <span class="hljs-number">1</span>; t &gt;= k - <span class="hljs-number">1</span>; t--){<span class="hljs-comment">//枚举分段位置</span>
                    s += d[t + <span class="hljs-number">1</span>];<span class="hljs-comment">//s表示t+1~j的Y的和</span>
                    <span class="hljs-keyword">if</span>(f[t][k - <span class="hljs-number">1</span>] &amp;&amp; ((s | res) == res)){<font></font>
                        f[j][k] = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">bool</span> flag = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = A; j &lt;= B; j++){<span class="hljs-comment">//枚举分A到B段的所有情况</span>
            <span class="hljs-keyword">if</span>(f[n][j]){<font></font>
                flag = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span>(!flag)ans |= (<span class="hljs-number">1L</span>L &lt;&lt; i);<span class="hljs-comment">//不可以放0则只能放1</span><font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> ans;<font></font>
}<font></font>
<span class="hljs-function">ll <span class="hljs-title">solve2</span><span class="hljs-params">()</span></span>{<font></font>
    ll ans = <span class="hljs-number">0</span>, res = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> maxn = log2(sum) + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = maxn; i &gt;= <span class="hljs-number">0</span>; i--){<font></font>
        res = ans | ((<span class="hljs-number">1L</span>L &lt;&lt; i) - <span class="hljs-number">1L</span>L);
        <span class="hljs-built_in">memset</span>(g, <span class="hljs-number">127</span>, <span class="hljs-keyword">sizeof</span>(g));<font></font>
        g[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++){<font></font>
            ll s = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = j - <span class="hljs-number">1</span>; k &gt;= <span class="hljs-number">0</span>; k--){<font></font>
                s += d[k + <span class="hljs-number">1</span>];
                <span class="hljs-keyword">if</span>((s | res) == res)<font></font>
                    g[j] = min(g[j], g[k] + <span class="hljs-number">1</span>);<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span>(g[n] &gt; B) ans |= (<span class="hljs-number">1L</span>L &lt;&lt; i);<span class="hljs-comment">//如果得到0的最小分段数大于B，那么这一位只能为1</span><font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> ans;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">//freopen("sculpture.in", "r", stdin);</span>
    <span class="hljs-comment">//freopen("sculpture.out", "w", stdout);</span><font></font>
    n = read(), A = read(), B = read();<font></font>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) d[i] = read(), sum += d[i];
    <span class="hljs-keyword">if</span>(A == <span class="hljs-number">1</span>)  <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, solve2());
    <span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, solve1());
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">祝大家早日AC！</font><font style="vertical-align: inherit;">！</font><font style="vertical-align: inherit;">！</font></font></p>
                    </div>
                </div>
            </div>
        </div>
                    <div class="am-g lg-main-content solution-block" data-blog-id="39177">
            <div class="am-u-md-4 am-u-lg-3 lg-right am-hide-sm">
                <section class="am-panel am-panel-default lg-summary">
                    <div class="lg-summary-content">
                        <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            評論
                            </font></font><span class="lg-right">
                                <a class="comment-page-switch" data-forward="-1"><i class="am-icon-chevron-left" style="display: none;"></i></a>
                                <a class="comment-page-switch" data-forward="1"><i class="am-icon-chevron-right" style="display: none;"></i></a>
                            </span>
                        </h2>
                        <ul class="am-list am-list-static am-list-border am-list-striped" style="position: relative;" data-comment-count="4">
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kkksc0³</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    大佬。</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">收下我的膝蓋.........驚呆驚呆
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gravf</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    STO
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jean</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    大佬TQL %%% ，感謝這麼詳細的解釋
                                </font></font></li>
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enquir</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    %%%
                                </font></font></li>
                                                                                    <div class="fadeout" style="display: none;">
                                <div class="comment-show-more"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 展開更多</font></font></div>
                            </div>
                        </ul>
                                            </div>
                </section>
            </div>
            <div class="am-u-md-8 am-u-lg-9 lg-right">
                <div class="lg-content-left">
                    <div class="lg-article am-g" style="min-height: 350px;">
                        <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作者: </font></font><a class="lg-fg-bluelight" href="https://www.luogu.com.cn/user/47136" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ww3113306</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                            更新時間: 2018-05-11 23:29
                         </font></font></span>
                        <a class="lg-small" href="https://www.luogu.com.cn/blog/user47136/solution-p3646" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;在Ta的博客查看</font></font></a>
                        <a class="lg-small" style="cursor:pointer" name="report" data-report-id="39177"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            舉報
                         </font></font></a>

                        <font style="vertical-align: inherit;"><span data-blog-id="39177" class="lg-right vote-count"><font style="vertical-align: inherit;">7</font></span></font><span data-blog-id="39177" data-vote-value="-1" class="thumb-down am-icon-thumbs-o-down lg-right vote ">
                        </span>
                        <span class="lg-right">&nbsp;&nbsp;</span>
                        <span data-blog-id="39177" class="lg-right vote-count"><font style="vertical-align: inherit;"></font></span>
                        <span class="lg-right">&nbsp;</span>
                        <span data-blog-id="39177" data-vote-value="1" class="thumb-up am-icon-thumbs-o-up lg-right vote ">
                        </span>
                        <hr>
                        <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">寫了好久。</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">剛剛調了一個小時各種對拍，，，，最後發現是多寫了一個等號，，，，內心拒絕</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示一開始看真的是各種懵逼啊</font></font></p>
<p><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在偷聽到某位大佬說的從高位開始貪心後發現可做</font></font></del></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先考慮小數據</font></font><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（因為可以亂搞）</font></font></del></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以先從高位開始枚舉位數:</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for(int k=all; k ;k--)</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ans表示當前答案，f[i][j]表示dp到第i為，分為j段，是否可以滿足第k位為0</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ans初始為0，每次DP完就修改ans，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以枚舉i和j，然後枚舉上一段的結尾l，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由於是or，所以之前已經有的是消不掉的，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">於是有if(!f[l][j-1]) continue;</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">這樣就可以保證之前的都已經滿足了，所以只要考慮當前段就好了</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sum[i]表示到i的前綴和。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先獲取當前段大小now=sum[i] - sum[l]</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以如果now的第k位為0，並且之前的高位都不與當前ans衝突，就可以轉移了</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因為如果高位與ans衝突，而前面已經最優了，所以如果衝突只能是不那麼優，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">於是後面再優都補不回來了。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其實這也是從高位貪心的意義所在</font></font></strong></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後如果在f[n][A ~ B]中有任意一個為true的話，ans就不用修改（因為默認已經是0了）</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而如果一個都沒有，那麼就將ans的當前位變成1，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那麼考慮如何判斷，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先運算符肯定只能用or，不然是會遺漏信息的（也許可以用其他的吧，但是我沒想到）</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考慮這樣兩個二進制串:</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">now ：101100 1011</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ans ： 101100 0000</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中間的空格代表把第k位和後面隔開,</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通過一些二進制的基本性質（其實也是所有進制的基本性質）可以發現，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果前面都是相同的話，因為ans的小於k的位數都還不確定，都是0，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以最大相差也就是2^(k-1),</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反之如果前面有衝突，那麼由於衝突在前面，相差一定會超過2^(k-1),</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以直接判斷now和ans的差就可以了？</font></font></p>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是！</font></font></strong></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因為now是中間過程，所以now是可能小於ans的，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以如果是這樣的情況的話：</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">now : 10 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0 1011</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ans : 101100 0000</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">這樣的話now &lt; ans,所以now - ans 一定小於2^(k-1),-1是因為第k位對應的是2^(k-1),(因為從0次方開始數的)</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是這樣是不合法的，之所以這樣會被誤判為合法，是因為它之前的那個粗體0幫後面的粗體1抵消掉了。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此為了這樣的0不會對真正不合法的1造成乾擾，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我們只需要計算(now | ans) - ans &lt; 2^(k-1)是否成立即可，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因為這樣的話，所有這樣的0都會變為1，於是這時要再有不合法的1出現就無法被抵消了。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">於是小數據就解決了，但是考慮到最大的點n &lt;= 2000，這樣的複雜度肯定是過不去的</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是觀察發現，對於最大的那幾個點，滿足A == 1,</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而之前的f數組之所以要開二維，還要枚舉段數，就是因為只有枚舉了所有情況才能保證不漏掉A～B之間的答案，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因為段數小不一定更優，不然可能會找到小於A的答案，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是因為A == 1，就不可能會找到小於A的答案了，這時也滿足段數小的一定更優，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以我們直接令g[i]表示dp到i，使第k位為0的最小段數，</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然後轉移時判斷條件和上面一樣即可，注意初始化g[0]=0,其餘為極大值</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面放代碼：</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> R register int</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AC 2100</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> getchar() *o++</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LL long long</span>
<span class="hljs-keyword">char</span> READ[<span class="hljs-number">5000100</span>],*o=READ;
<span class="hljs-keyword">int</span> n,A,B,all;
<span class="hljs-keyword">int</span> s[AC],g[AC];<font></font>
LL sum[AC];<span class="hljs-comment">//g[i]是适用于没有下限的情况</span><font></font>
LL ans;<font></font>
<span class="hljs-keyword">bool</span> f[AC][<span class="hljs-number">250</span>];<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">int</span> x=<span class="hljs-number">0</span>;<span class="hljs-keyword">char</span> c=getchar();
    <span class="hljs-keyword">while</span>(c &gt; <span class="hljs-string">'9'</span> || c &lt; <span class="hljs-string">'0'</span>) c=getchar();
    <span class="hljs-keyword">while</span>(c &gt;= <span class="hljs-string">'0'</span> &amp;&amp; c &lt;= <span class="hljs-string">'9'</span>) x=x*<span class="hljs-number">10</span>+c-<span class="hljs-string">'0'</span>,c=getchar();
    <span class="hljs-keyword">return</span> x;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">work1</span><span class="hljs-params">()</span><span class="hljs-comment">//f[i][j]代表前i位分成j段，第k位能否在保证前k位都不变且不考虑后面all-k位的情况下是否可能与当前ans相同(此时第k位默认为0)</span>
</span>{<span class="hljs-comment">//这样的话相当于给了一个判断依据ans，于是就可以提高复杂度以解决问题</span>
    LL now;<span class="hljs-comment">//获取最高位数</span>
    <span class="hljs-keyword">bool</span> done=<span class="hljs-literal">false</span>;<font></font>
    all=log2(sum[n]) + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span>(R k=all; k ;k--)<span class="hljs-comment">//枚举位数(从高位开始贪心)</span><font></font>
    {<font></font>
        <span class="hljs-built_in">memset</span>(f,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(f));<font></font>
        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-literal">true</span>;<font></font>
        done=<span class="hljs-literal">false</span>;<span class="hljs-comment">//error!!!每次都要重置</span>
        <span class="hljs-keyword">for</span>(R i=<span class="hljs-number">1</span>;i&lt;=n;i++)<span class="hljs-comment">//枚举到了哪里</span><font></font>
        {<font></font>
            <span class="hljs-keyword">int</span> be=min(i,B);
            <span class="hljs-keyword">for</span>(R j=<span class="hljs-number">1</span>;j&lt;=be;j++)<span class="hljs-comment">//枚举分的段数</span><font></font>
            {<font></font>
                <span class="hljs-keyword">for</span>(R l=j<span class="hljs-number">-1</span>;l&lt;i;l++)<span class="hljs-comment">//枚举上一段的结尾,error!!!上一段啊怎么可以等于。。。。</span><font></font>
                {<font></font>
                    <span class="hljs-keyword">if</span>(!f[l][j<span class="hljs-number">-1</span>]) <span class="hljs-keyword">continue</span>;<span class="hljs-comment">//因为是|,所以前面有1不能消掉，所以前面不满足就不能取了</span>
                    now=sum[i] - sum[l];<span class="hljs-comment">//获取区间和</span>
                    <span class="hljs-keyword">if</span>(((now | ans) - ans) &lt; (<span class="hljs-number">1L</span>L&lt;&lt;(k<span class="hljs-number">-1</span>)))<span class="hljs-comment">//error!!!注意longlong </span>
                    {<span class="hljs-comment">//如果相差小于当前位，代表不一样的都在后面，就没关系了</span>
                        f[i][j]=<span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;<font></font>
                    }<font></font>
                }<font></font>
                <span class="hljs-keyword">if</span>(i == n)<font></font>
                {<font></font>
                    <span class="hljs-keyword">if</span>(j &gt;= A &amp;&amp; j &lt;= B &amp;&amp; f[i][j])<font></font>
                    {<font></font>
                        done=<span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;<span class="hljs-comment">//如果找到了就无需再找了</span><font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span>(!done) ans+=<span class="hljs-number">1L</span>L&lt;&lt;(k<span class="hljs-number">-1</span>);<span class="hljs-comment">//因为1已经有一位了，所以只要移动k-1位就可以了(其实是因为本来就只要判断2^(k-1),因为第一位对应的是2^0)</span><font></font>
    }<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld\n"</span>,ans);<font></font>
}<font></font>
<span class="hljs-comment">//g[i]代表满足这位为0最少需要的段数</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">work2</span><span class="hljs-params">()</span>
</span>{<font></font>
    LL now;<font></font>
    all=log2(sum[n]) + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span>(R k=all; k ;k--)<font></font>
    {<font></font>
        <span class="hljs-built_in">memset</span>(g,<span class="hljs-number">127</span>,<span class="hljs-keyword">sizeof</span>(g));<font></font>
        g[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(R i=<span class="hljs-number">1</span>;i&lt;=n;i++)<span class="hljs-comment">//枚举树</span><font></font>
        {<font></font>
            <span class="hljs-keyword">for</span>(R j=<span class="hljs-number">0</span>;j&lt;i;j++)<span class="hljs-comment">//枚举上一段的结尾，，，懒得特判1了,就从0开始吧</span><font></font>
            {<font></font>
                now=sum[i] - sum[j];<font></font>
                <span class="hljs-keyword">if</span>(((now | ans) - ans) &lt; (<span class="hljs-number">1L</span>L&lt;&lt;(k<span class="hljs-number">-1</span>))) g[i]=min(g[i],g[j]+<span class="hljs-number">1</span>);<span class="hljs-comment">//error!!!注意longlong </span>
            }<span class="hljs-comment">//因为要求最小的,所以就不能跳过了</span><font></font>
        }<font></font>
     <span class="hljs-comment">/*   printf("!!!%d:\n",k);
        for(int i=1;i&lt;=n;i++) printf("%d ",g[i]);
        printf("\n");*/</span>
        <span class="hljs-keyword">if</span>(g[n] &gt; B) ans+=<span class="hljs-number">1L</span>L&lt;&lt;(k<span class="hljs-number">-1</span>);<span class="hljs-comment">//error!!!貌似在这里也要加LL吧 </span><font></font>
    }<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld\n"</span>,ans);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pre</span><span class="hljs-params">()</span>
</span>{<font></font>
    n=read(),A=read(),B=read();<font></font>
    <span class="hljs-keyword">for</span>(R i=<span class="hljs-number">1</span>;i&lt;=n;i++) s[i]=read(),sum[i]=sum[i<span class="hljs-number">-1</span>] + (LL)s[i];<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
    freopen(<span class="hljs-string">"in.in"</span>,<span class="hljs-string">"r"</span>,<span class="hljs-built_in">stdin</span>);
<span class="hljs-comment">//  freopen("sculpture.in","r",stdin);</span>
<span class="hljs-comment">//  freopen("sculpture.out","w",stdout);</span>
    fread(READ,<span class="hljs-number">1</span>,<span class="hljs-number">5000000</span>,<span class="hljs-built_in">stdin</span>);    <font></font>
    pre();<font></font>
    <span class="hljs-keyword">if</span>(A == <span class="hljs-number">1</span>) work2();<span class="hljs-comment">//特殊点特殊处理</span>
    <span class="hljs-keyword">else</span> work1();<font></font>
    fclose(<span class="hljs-built_in">stdin</span>);
<span class="hljs-comment">//  fclose(stdout);</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
                    <div class="am-g lg-main-content solution-block" data-blog-id="16120">
            <div class="am-u-md-4 am-u-lg-3 lg-right am-hide-sm">
                <section class="am-panel am-panel-default lg-summary">
                    <div class="lg-summary-content">
                        <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            評論
                            </font></font><span class="lg-right">
                                <a class="comment-page-switch" data-forward="-1"><i class="am-icon-chevron-left" style="display: none;"></i></a>
                                <a class="comment-page-switch" data-forward="1"><i class="am-icon-chevron-right" style="display: none;"></i></a>
                            </span>
                        </h2>
                        <ul class="am-list am-list-static am-list-border am-list-striped" style="position: relative;" data-comment-count="1">
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">windiest</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    orz
                                </font></font></li>
                                                                                    <div class="fadeout" style="display: none;">
                                <div class="comment-show-more"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 展開更多</font></font></div>
                            </div>
                        </ul>
                                            </div>
                </section>
            </div>
            <div class="am-u-md-8 am-u-lg-9 lg-right">
                <div class="lg-content-left">
                    <div class="lg-article am-g" style="min-height: 350px;">
                        <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作者: </font></font><a class="lg-fg-bluelight" href="https://www.luogu.com.cn/user/5037" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elijahqi</font></font></a>&nbsp;<a class="sb_amazeui" target="_blank" href="https://www.luogu.com.cn/discuss/show/142324"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="#f1c40f" style="margin-bottom: -3px;"><path d="M16 8C16 6.84375 15.25 5.84375 14.1875 5.4375C14.6562 4.4375 14.4688 3.1875 13.6562 2.34375C12.8125 1.53125 11.5625 1.34375 10.5625 1.8125C10.1562 0.75 9.15625 0 8 0C6.8125 0 5.8125 0.75 5.40625 1.8125C4.40625 1.34375 3.15625 1.53125 2.34375 2.34375C1.5 3.1875 1.3125 4.4375 1.78125 5.4375C0.71875 5.84375 0 6.84375 0 8C0 9.1875 0.71875 10.1875 1.78125 10.5938C1.3125 11.5938 1.5 12.8438 2.34375 13.6562C3.15625 14.5 4.40625 14.6875 5.40625 14.2188C5.8125 15.2812 6.8125 16 8 16C9.15625 16 10.1562 15.2812 10.5625 14.2188C11.5938 14.6875 12.8125 14.5 13.6562 13.6562C14.4688 12.8438 14.6562 11.5938 14.1875 10.5938C15.25 10.1875 16 9.1875 16 8ZM11.4688 6.625L7.375 10.6875C7.21875 10.8438 7 10.8125 6.875 10.6875L4.5 8.3125C4.375 8.1875 4.375 7.96875 4.5 7.8125L5.3125 7C5.46875 6.875 5.6875 6.875 5.8125 7.03125L7.125 8.34375L10.1562 5.34375C10.3125 5.1875 10.5312 5.1875 10.6562 5.34375L11.4688 6.15625C11.5938 6.28125 11.5938 6.5 11.4688 6.625Z"></path></svg></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                            更新時間: 2017-09-23 13:52
                         </font></font></span>
                        <a class="lg-small" href="https://www.luogu.com.cn/blog/user5037/solution-p3646" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;在Ta的博客查看</font></font></a>
                        <a class="lg-small" style="cursor:pointer" name="report" data-report-id="16120"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            舉報
                         </font></font></a>

                        <font style="vertical-align: inherit;"><span data-blog-id="16120" class="lg-right vote-count"><font style="vertical-align: inherit;">5</font></span></font><span data-blog-id="16120" data-vote-value="-1" class="thumb-down am-icon-thumbs-o-down lg-right vote ">
                        </span>
                        <span class="lg-right">&nbsp;&nbsp;</span>
                        <span data-blog-id="16120" class="lg-right vote-count"><font style="vertical-align: inherit;"></font></span>
                        <span class="lg-right">&nbsp;</span>
                        <span data-blog-id="16120" data-vote-value="1" class="thumb-up am-icon-thumbs-o-up lg-right vote ">
                        </span>
                        <hr>
                        <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一開始第一眼想到dp 但是沒想到數位dp 如果樸素的寫dp 方程那麼我不能保證每次or的最小就能使後面的or小</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">於是在leoly的介紹下，學習了數位dp</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一共這些數加起來是2000*10^9</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我們對於他的每一個二進制位去dp 然後貪心的從最高位開始做</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那麼前5個子任務中的四個是100以內的</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我們定義方程f[i][j]表示前1~i個間分j組能否滿足條件</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">這個滿足條件的含義很多就是我現在這個數位能否是0</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f[i][j]表示1~i分成j個，當前數位可以是0 tmp用來儲存我此前已經確定了的最優值，每回做的時候我先認為這個地方可以是0 那麼tmp這一位就需要+1 然後每次用位運算去判斷能否滿足條件</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間複雜度:100^3*log2(和最大)</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那麼這種複雜度顯然子任務5是做不了的，觀察到子任務5 A的範圍就是1說明我們只要看滿足條件（最優分法）的組數是否超過了B</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;
樣例的二進制</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">01000 00001 00010 00001 00101 00100 每次都是一個數位從上往下注意小細節：如1LL&lt;&lt; 以及可能存在全是0的情況</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><a href="http://www.elijahqi.win/2017/09/23/luogu3646-apio2015%e5%b7%b4%e5%8e%98%e5%b2%9b%e7%9a%84%e9%9b%95%e5%a1%91/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.elijahqi.win/2017/09/23/luogu3646-apio2015%e5%b7%b4%e5%8e%98%e5%b2%9b%e7%9a%84%e9%9b%95 %e5%a1%91/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )蒟蒻的blog歡迎前來交流qwq</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstdio&gt;</span> </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstring&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cmath&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> inf 0x7f7f7f7f</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> N 2200</span>
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">int</span> x=<span class="hljs-number">0</span>,f=<span class="hljs-number">1</span>;<span class="hljs-keyword">char</span> ch=getchar();
    <span class="hljs-keyword">while</span> (ch&lt;<span class="hljs-string">'0'</span>||ch&gt;<span class="hljs-string">'9'</span>) {<span class="hljs-keyword">if</span> (ch==<span class="hljs-string">'-'</span>) f=<span class="hljs-number">-1</span>;ch=getchar();}
    <span class="hljs-keyword">while</span> (ch&lt;=<span class="hljs-string">'9'</span>&amp;&amp;ch&gt;=<span class="hljs-string">'0'</span>){x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">'0'</span>;ch=getchar();}
    <span class="hljs-keyword">return</span> x*f;<font></font>
}<font></font>
<span class="hljs-keyword">int</span> A,B,n,a[N];
<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> sum,s[N];
<span class="hljs-keyword">bool</span> f[N][N];<span class="hljs-keyword">int</span> g[N];
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dp1</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">int</span> kk=log2(sum);<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> tmp=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> p=<span class="hljs-number">1</span>;p&lt;=kk+<span class="hljs-number">1</span>;++p){
        <span class="hljs-built_in">memset</span>(f,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(f));tmp+=<span class="hljs-number">1L</span>L&lt;&lt;kk-p+<span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) <span class="hljs-keyword">if</span> (!(s[i]&amp;tmp)) f[i][<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<span class="hljs-keyword">bool</span> flag=<span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">2</span>;j&lt;=B;++j){
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=j;i&lt;=n;++i){
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k=j<span class="hljs-number">-1</span>;k&lt;i;++k){
                    <span class="hljs-keyword">if</span> (!(s[i]-s[k]&amp;tmp)&amp;&amp;f[k][j<span class="hljs-number">-1</span>]) f[i][j]=<span class="hljs-number">1</span>;<span class="hljs-comment">//k+1位到结尾 </span><font></font>
                }<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (j&gt;=A&amp;&amp;j&lt;=B) <span class="hljs-keyword">if</span> (!flag&amp;&amp;f[n][j]) flag=<span class="hljs-literal">true</span>;<font></font>
        }    <font></font>
        <span class="hljs-keyword">if</span> (f[n][<span class="hljs-number">1</span>]) flag=<span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (!flag) tmp-=<span class="hljs-number">1L</span>L&lt;&lt;kk-p+<span class="hljs-number">1</span>;<font></font>
    }<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>,(<span class="hljs-number">1L</span>L&lt;&lt;kk+<span class="hljs-number">1</span>)-tmp<span class="hljs-number">-1</span>);<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dp2</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">int</span> kk=log2(sum);<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> tmp=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> p=<span class="hljs-number">1</span>;p&lt;=kk+<span class="hljs-number">1</span>;++p){
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) g[i]=inf;<font></font>
        tmp+=<span class="hljs-number">1L</span>L&lt;&lt;kk-p+<span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i){
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;i;++j){
                <span class="hljs-keyword">if</span> (!((s[i]-s[j])&amp;tmp)){<font></font>
                    g[i]=min(g[i],g[j]+<span class="hljs-number">1</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (g[n]&gt;B) tmp-=<span class="hljs-number">1L</span>L&lt;&lt;kk-p+<span class="hljs-number">1</span>;<font></font>
    }<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>,(<span class="hljs-number">1L</span>L&lt;&lt;kk+<span class="hljs-number">1</span>)-tmp<span class="hljs-number">-1</span>);<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{<font></font>
    freopen(<span class="hljs-string">"3646.in"</span>,<span class="hljs-string">"r"</span>,<span class="hljs-built_in">stdin</span>);<font></font>
    n=read();A=read();B=read();<font></font>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) a[i]=read(),sum+=a[i];<span class="hljs-keyword">if</span> (!sum){<span class="hljs-built_in">printf</span>(<span class="hljs-string">"0"</span>);<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) s[i]=s[i<span class="hljs-number">-1</span>]+a[i]; 
    <span class="hljs-keyword">if</span> (A!=<span class="hljs-number">1</span>) dp1();<span class="hljs-keyword">else</span> dp2();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
                    <div class="am-g lg-main-content solution-block" data-blog-id="71639">
            <div class="am-u-md-4 am-u-lg-3 lg-right am-hide-sm">
                <section class="am-panel am-panel-default lg-summary">
                    <div class="lg-summary-content">
                        <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            評論
                            </font></font><span class="lg-right">
                                <a class="comment-page-switch" data-forward="-1"><i class="am-icon-chevron-left" style="display: none;"></i></a>
                                <a class="comment-page-switch" data-forward="1"><i class="am-icon-chevron-right" style="display: none;"></i></a>
                            </span>
                        </h2>
                        <ul class="am-list am-list-static am-list-border am-list-striped" style="position: relative;" data-comment-count="1">
                                                            <li>
                                    <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開始新的記憶</font></font></span><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                                    %%%
                                </font></font></li>
                                                                                    <div class="fadeout" style="display: none;">
                                <div class="comment-show-more"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 展開更多</font></font></div>
                            </div>
                        </ul>
                                            </div>
                </section>
            </div>
            <div class="am-u-md-8 am-u-lg-9 lg-right">
                <div class="lg-content-left">
                    <div class="lg-article am-g" style="min-height: 350px;">
                        <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作者: </font></font><a class="lg-fg-red lg-bold" href="https://www.luogu.com.cn/user/110303" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jean</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                            更新時間: 2018-09-29 22:34
                         </font></font></span>
                        <a class="lg-small" href="https://www.luogu.com.cn/blog/jean0-0/p3646-apio2015-ba-li-dao-di-diao-su" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;在Ta的博客查看</font></font></a>
                        <a class="lg-small" style="cursor:pointer" name="report" data-report-id="71639"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            舉報
                         </font></font></a>

                        <font style="vertical-align: inherit;"><span data-blog-id="71639" class="lg-right vote-count"><font style="vertical-align: inherit;">3</font></span></font><span data-blog-id="71639" data-vote-value="-1" class="thumb-down am-icon-thumbs-o-down lg-right vote ">
                        </span>
                        <span class="lg-right">&nbsp;&nbsp;</span>
                        <span data-blog-id="71639" class="lg-right vote-count"><font style="vertical-align: inherit;"></font></span>
                        <span class="lg-right">&nbsp;</span>
                        <span data-blog-id="71639" data-vote-value="1" class="thumb-up am-icon-thumbs-o-up lg-right vote ">
                        </span>
                        <hr>
                        <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">毒瘤題。    </font></font></p>
<p><a href="https://www.luogu.org/problemnew/show/P3646"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">題目鏈接</font></font></a></p>
<p><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">還不是因為今天模擬賽剛好出了這道題, 不然我這種蒟蒻怎麼會來做這個題</font></font></del> </p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">悄咪咪的說， 我今天只是把所有的統統按位或，結果是可以拿到50分的...我們的數據也太水了吧哈哈哈哈哈</font></font></p>
<p><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">騙分的藝術</font></font></del></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至於正解，是要用到數位DP.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使答案最小，就要盡量使一個位上的數</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都為0</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
而且很顯然數位越高對答案的影響就越大，所以就需要從高位開始往後DP.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我們可以設一個</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f[i][j] </font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.75em;"></span><span class="strut bottom" style="height: 1em; vertical-align: -0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right: 0.10764em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="mopen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font></span><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="mclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] </font></font></span><span class="mopen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font></span><span class="mord mathit" style="margin-right: 0.05724em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j </font></font></span><span class="mclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示前1-i個數中分為j個區間能否使當前的數位為0。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f[i][j]</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.75em;"></span><span class="strut bottom" style="height: 1em; vertical-align: -0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right: 0.10764em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="mopen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font></span><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="mclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] </font></font></span><span class="mopen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font></span><span class="mord mathit" style="margin-right: 0.05724em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j </font></font></span><span class="mclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始化為0，再用k枚舉1~i中的分組位置，當前要求的當然就是最後一組， 1~k為前j-1種分法；</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">對了，事先還要對這個序列求一遍前綴和，我們用sum數組將其保存。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
於是可以直接求第k~i區間的和，為sum[i]-sum[k];（這裡不需要將k-1，因為k本身不在最後一組中）</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在的任務就是判斷啦 </font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">把最後一組的和求出來後，先與之前的ans按位或，得到新的答案，再與ans按位異或，就是求出比之前的ans新增的值；</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
比如判斷</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
000 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
011 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果這一位為1，則100 &gt; 011,不行，反之則可以，滿足條件；   </font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">後面</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gi </font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.65952em;"></span><span class="strut bottom" style="height: 0.85396em; vertical-align: -0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right: 0.03588em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g </font></font></span><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">數組就是對任務5，由於A=1,則只需滿足小於B的條件即可，不需要再求滿足條件的組數；  </font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代碼</font></font></p>
<pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;<font></font>
ll d[<span class="hljs-number">1111</span>];<font></font>
ll n,  a,  b,  ans ;<font></font>
ll f[<span class="hljs-number">1005</span>][<span class="hljs-number">1005</span>], g[<span class="hljs-number">1005</span>], sum[<span class="hljs-number">1005</span>] ,flag;
<span class="hljs-function"><span class="hljs-keyword">inline</span> ll <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{<font></font>
    ll res = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">char</span> ch = getchar();
    <span class="hljs-keyword">while</span>(ch&lt;<span class="hljs-string">'0'</span>||ch&gt;<span class="hljs-string">'9'</span>) ch = getchar();
    <span class="hljs-keyword">while</span>(ch&gt;=<span class="hljs-string">'0'</span>&amp;&amp;ch&lt;=<span class="hljs-string">'9'</span>) res = (res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+ch-<span class="hljs-string">'0'</span>, ch = getchar();
    <span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld%lld"</span>,&amp;n,&amp;a,&amp;b);
    <span class="hljs-keyword">for</span>(ll i = <span class="hljs-number">1</span>; i&lt;=n; i++){<font></font>
        d[i] = read();<font></font>
        sum[i]= sum[i<span class="hljs-number">-1</span>]+d[i];<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">100</span>){<font></font>
        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span>(ll l = (<span class="hljs-number">1L</span>L&lt;&lt;<span class="hljs-number">50</span>); l!=<span class="hljs-number">0</span>; l&gt;&gt;=<span class="hljs-number">1</span>){
            <span class="hljs-keyword">for</span>(ll  i = <span class="hljs-number">1</span>;i&lt;=n;i++)
                <span class="hljs-keyword">for</span>(ll j = <span class="hljs-number">1</span>; j&lt;=i;j++)<font></font>
                    f[i][j] = <span class="hljs-number">0</span>;<font></font>
            flag = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span>(ll i = <span class="hljs-number">1</span>; i&lt;=n; i++)
                <span class="hljs-keyword">for</span>(ll j = <span class="hljs-number">1</span>; j&lt;=i;j++)
                    <span class="hljs-keyword">for</span>(ll k = <span class="hljs-number">0</span>; k&lt;i ;k++)
                        <span class="hljs-keyword">if</span>((((sum[i]-sum[k])|ans)^ans)&lt;=l<span class="hljs-number">-1</span>&amp;&amp;f[k][j<span class="hljs-number">-1</span>]==<span class="hljs-number">1</span>)<font></font>
                            f[i][j] = <span class="hljs-number">1</span>;    
                <span class="hljs-keyword">for</span>(ll j = a; j&lt;=b;j++) 
                    <span class="hljs-keyword">if</span>(f[n][j]==<span class="hljs-number">1</span>){ flag = <span class="hljs-number">1</span>; <span class="hljs-keyword">break</span>;}
            <span class="hljs-keyword">if</span>(flag==<span class="hljs-number">0</span>) ans |= l;<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span>{<font></font>
        g[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span>(ll l = (<span class="hljs-number">1L</span>L&lt;&lt;<span class="hljs-number">50</span>);l;l&gt;&gt;=<span class="hljs-number">1</span>){
            <span class="hljs-keyword">for</span>(ll i = <span class="hljs-number">1</span>;i&lt;=n;i++)<font></font>
                g[i] = <span class="hljs-number">99999999</span>;
            <span class="hljs-keyword">for</span>(ll i = <span class="hljs-number">1</span>; i&lt;=n; i++)
                <span class="hljs-keyword">for</span>(ll k = <span class="hljs-number">0</span>;k &lt; i ; k++)
                    <span class="hljs-keyword">if</span>((((sum[i]-sum[k])|ans)^ans)&lt;=l<span class="hljs-number">-1</span>&amp;&amp;g[k])<font></font>
                        g[i] = min(g[i],g[k]+<span class="hljs-number">1</span>);
            <span class="hljs-keyword">int</span> flag = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">if</span>(g[n]&lt;=b+<span class="hljs-number">1</span>) flag = <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span>(flag==<span class="hljs-number">0</span>) ans |= l;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>,ans);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
                    <div class="am-g lg-main-content solution-block" data-blog-id="175200">
            <div class="am-u-md-4 am-u-lg-3 lg-right am-hide-sm">
                <section class="am-panel am-panel-default lg-summary">
                    <div class="lg-summary-content">
                        <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            評論
                            </font></font><span class="lg-right">
                                <a class="comment-page-switch" data-forward="-1"><i class="am-icon-chevron-left" style="display: none;"></i></a>
                                <a class="comment-page-switch" data-forward="1"><i class="am-icon-chevron-right" style="display: none;"></i></a>
                            </span>
                        </h2>
                        <ul class="am-list am-list-static am-list-border am-list-striped" style="position: relative;" data-comment-count="0">
                                                                                        <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">還沒有評論</font></font></li>
                                                        <div class="fadeout" style="display: none;">
                                <div class="comment-show-more"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 展開更多</font></font></div>
                            </div>
                        </ul>
                                            </div>
                </section>
            </div>
            <div class="am-u-md-8 am-u-lg-9 lg-right">
                <div class="lg-content-left">
                    <div class="lg-article am-g" style="min-height: 350px;">
                        <span class="lg-small"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作者: </font></font><a class="lg-fg-red lg-bold" href="https://www.luogu.com.cn/user/41698" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hl666</font></font></a>&nbsp;<a class="sb_amazeui" target="_blank" href="https://www.luogu.com.cn/discuss/show/142324"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="#3498db" style="margin-bottom: -3px;"><path d="M16 8C16 6.84375 15.25 5.84375 14.1875 5.4375C14.6562 4.4375 14.4688 3.1875 13.6562 2.34375C12.8125 1.53125 11.5625 1.34375 10.5625 1.8125C10.1562 0.75 9.15625 0 8 0C6.8125 0 5.8125 0.75 5.40625 1.8125C4.40625 1.34375 3.15625 1.53125 2.34375 2.34375C1.5 3.1875 1.3125 4.4375 1.78125 5.4375C0.71875 5.84375 0 6.84375 0 8C0 9.1875 0.71875 10.1875 1.78125 10.5938C1.3125 11.5938 1.5 12.8438 2.34375 13.6562C3.15625 14.5 4.40625 14.6875 5.40625 14.2188C5.8125 15.2812 6.8125 16 8 16C9.15625 16 10.1562 15.2812 10.5625 14.2188C11.5938 14.6875 12.8125 14.5 13.6562 13.6562C14.4688 12.8438 14.6562 11.5938 14.1875 10.5938C15.25 10.1875 16 9.1875 16 8ZM11.4688 6.625L7.375 10.6875C7.21875 10.8438 7 10.8125 6.875 10.6875L4.5 8.3125C4.375 8.1875 4.375 7.96875 4.5 7.8125L5.3125 7C5.46875 6.875 5.6875 6.875 5.8125 7.03125L7.125 8.34375L10.1562 5.34375C10.3125 5.1875 10.5312 5.1875 10.6562 5.34375L11.4688 6.15625C11.5938 6.28125 11.5938 6.5 11.4688 6.625Z"></path></svg></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                            更新時間: 2019-10-03 23:43
                         </font></font></span>
                        <a class="lg-small" href="https://www.luogu.com.cn/blog/hl666/solution-p3646" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;在Ta的博客查看</font></font></a>
                        <a class="lg-small" style="cursor:pointer" name="report" data-report-id="175200"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                            舉報
                         </font></font></a>

                        <font style="vertical-align: inherit;"><span data-blog-id="175200" class="lg-right vote-count"><font style="vertical-align: inherit;">0</font></span></font><span data-blog-id="175200" data-vote-value="-1" class="thumb-down am-icon-thumbs-o-down lg-right vote ">
                        </span>
                        <span class="lg-right">&nbsp;&nbsp;</span>
                        <span data-blog-id="175200" class="lg-right vote-count"><font style="vertical-align: inherit;"></font></span>
                        <span class="lg-right">&nbsp;</span>
                        <span data-blog-id="175200" data-vote-value="1" class="thumb-up am-icon-thumbs-o-up lg-right vote ">
                        </span>
                        <hr>
                        <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">深夜寫題解系列，話說這題暑假的時候就在LOJ上做掉了，然後今天看到Luogu上有就去交了一下，發現沒寫過題解，趕緊來補一下</font></font></p>
<p><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">說句題外話APIO2015的題目好水啊</font></font></del></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先考慮按位取或的過程，很顯然要從二進制位從高到低</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">貪心</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，盡量地讓這一位能取</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.64444em;"></span><span class="strut bottom" style="height: 0.64444em; vertical-align: 0em;"></span><span class="base"><span class="mord"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，那麼就是考慮怎麼判斷這一位能否取到</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.64444em;"></span><span class="strut bottom" style="height: 0.64444em; vertical-align: 0em;"></span><span class="base"><span class="mord"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的過程了</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考慮直接設一個狀態</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi><mo separator="true"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></mi></mrow></msub></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f_{i,j}</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.69444em;"></span><span class="strut bottom" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right: 0.10764em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="mpunct mtight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="mord mathit mtight" style="margin-right: 0.05724em;"><font style="vertical-align: inherit;"></font></span></span></span></span></span><font style="vertical-align: inherit;"><span class="vlist-s"><font style="vertical-align: inherit;"> j​</font></span></font><span class="vlist-s"><font style="vertical-align: inherit;"></font></span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"></span></span></span></span></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示把前</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.65952em;"></span><span class="strut bottom" style="height: 0.65952em; vertical-align: 0em;"></span><span class="base"><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">個數分成</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></mi></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.65952em;"></span><span class="strut bottom" style="height: 0.85396em; vertical-align: -0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right: 0.05724em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">段是否滿足條件，最後看一下</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi><mo separator="true"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi></mrow></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∈</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></mi><mo separator="true"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f_{n,i}(i\in [A,B])</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.75em;"></span><span class="strut bottom" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right: 0.10764em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="mpunct mtight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="mord mathit mtight"><font style="vertical-align: inherit;"></font></span></span></span></span></span><font style="vertical-align: inherit;"><span class="vlist-s"><font style="vertical-align: inherit;"> i​</font></span></font><span class="vlist-s"><font style="vertical-align: inherit;"></font></span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"></span></span></span></span></span><span class="mopen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="mrel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∈ </font></font></span><span class="mopen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font></span><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font></span><span class="mpunct"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="mord mathit" style="margin-right: 0.05017em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="mclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] </font></font></span><span class="mclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是否有</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.64444em;"></span><span class="strut bottom" style="height: 0.64444em; vertical-align: 0em;"></span><span class="base"><span class="mord"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即可</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那麼轉移也很簡單，記錄一下前綴和，然後向前枚舉一個點轉移，那麼這段區間和在這一位上必須是</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.64444em;"></span><span class="strut bottom" style="height: 0.64444em; vertical-align: 0em;"></span><span class="base"><span class="mord"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同時選擇這一段不能使答案變大，這個詳見代碼的轉移</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此我們現在有了一個</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><msup><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></mn></msup><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁡</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∑</font></font></mo><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O(n^3\log \sum Y_i)</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.814108em;"></span><span class="strut bottom" style="height: 1.06412em; vertical-align: -0.25001em;"></span><span class="base"><span class="mord mathit" style="margin-right: 0.02778em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font></span><span class="mopen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="mord"><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span></span></span></span></span></span></span></span><span class="mop"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l</font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font><span style="margin-right: 0.01389em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></span></span><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∑</font></font></span><span class="mord"><span class="mord mathit" style="margin-right: 0.22222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.22222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight"><font style="vertical-align: inherit;"></font></span></span></span></span><font style="vertical-align: inherit;"><span class="vlist-s"><font style="vertical-align: inherit;">i​</font></span></font><span class="vlist-s"><font style="vertical-align: inherit;"></font></span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"></span></span></span></span></span><span class="mclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的做法，可以通過前4個Subtask</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那麼再看一下第5個Subtask有什麼特殊之處，仔細一看會發現它的</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A=1</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.68333em;"></span><span class="strut bottom" style="height: 0.68333em; vertical-align: 0em;"></span><span class="base"><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font></span><span class="mrel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="mord"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那麼很顯然之前的DP之所以會慢就是因為考慮了答案的下界，但現在我們不用考慮了，直接考慮求出分開的最少段數，判斷是否小於</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></mi></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.68333em;"></span><span class="strut bottom" style="height: 0.68333em; vertical-align: 0em;"></span><span class="base"><span class="mord mathit" style="margin-right: 0.05017em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即可，同樣轉移的方法和上麵類似</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以這部分的複雜度是</font></font><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><msup><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></msup><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁡</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∑</font></font></mo><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo></mrow><annotation encoding="application/x-tex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O(n^2\log \sum Y_i)</font></font></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.814108em;"></span><span class="strut bottom" style="height: 1.06412em; vertical-align: -0.25001em;"></span><span class="base"><span class="mord mathit" style="margin-right: 0.02778em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font></span><span class="mopen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="mord"><span class="mord mathit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span></span></span></span></span><span class="mop"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l</font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font><span style="margin-right: 0.01389em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></span></span><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∑</font></font></span><span class="mord"><span class="mord mathit" style="margin-right: 0.22222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.22222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight"><font style="vertical-align: inherit;"></font></span></span></span></span><font style="vertical-align: inherit;"><span class="vlist-s"><font style="vertical-align: inherit;">i​</font></span></font><span class="vlist-s"><font style="vertical-align: inherit;"></font></span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"></span></span></span></span></span><span class="mclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的，兩者綜合即可通過此題</font></font></p>
<pre><code class="language-cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;cstring&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> RI register int</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CI const int&amp;</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> R=<span class="hljs-number">40</span>,N=<span class="hljs-number">2005</span>;
<span class="hljs-keyword">int</span> n,l,r,a[N]; <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ans;
<span class="hljs-keyword">namespace</span> Case1 <span class="hljs-comment">//n&lt;=100 solver</span><font></font>
{<font></font>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> MN=<span class="hljs-number">105</span>;
    <span class="hljs-keyword">bool</span> f[MN][MN];
    <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(CI idx)</span>
    </span>{<font></font>
        RI i,j,k; <span class="hljs-built_in">memset</span>(f,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(f));
        <span class="hljs-keyword">for</span> (f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=i=<span class="hljs-number">1</span>;i&lt;=n;++i) <span class="hljs-keyword">for</span> (j=<span class="hljs-number">1</span>;j&lt;=i;++j)<font></font>
        {<font></font>
            <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> sum=a[i]; <span class="hljs-keyword">for</span> (k=i<span class="hljs-number">-1</span>;~k;--k)<font></font>
            f[i][j]|=f[k][j<span class="hljs-number">-1</span>]&amp;&amp;(!((sum&gt;&gt;idx)&amp;<span class="hljs-number">1</span>))&amp;&amp;((((sum&gt;&gt;idx)&lt;&lt;idx)|ans)==ans),sum+=a[k];<font></font>
        }<font></font>
        <span class="hljs-keyword">bool</span> flag=<span class="hljs-number">0</span>; <span class="hljs-keyword">for</span> (i=l;i&lt;=r;++i) flag|=f[n][i]; <span class="hljs-keyword">return</span> flag;<font></font>
    }<font></font>
};<font></font>
<span class="hljs-keyword">namespace</span> Case2 <span class="hljs-comment">//l=1 solver</span><font></font>
{<font></font>
    <span class="hljs-keyword">int</span> f[N];
    <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(CI idx)</span>
    </span>{<font></font>
        RI i,j; <span class="hljs-keyword">for</span> (<span class="hljs-built_in">memset</span>(f,<span class="hljs-number">127</span>,<span class="hljs-keyword">sizeof</span>(f)),f[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>,i=<span class="hljs-number">1</span>;i&lt;=n;++i)<font></font>
        {<font></font>
            <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> sum=a[i]; <span class="hljs-keyword">for</span> (j=i<span class="hljs-number">-1</span>;~j;--j)<font></font>
            {<font></font>
                <span class="hljs-keyword">if</span> ((!((sum&gt;&gt;idx)&amp;<span class="hljs-number">1</span>))&amp;&amp;((((sum&gt;&gt;idx)&lt;&lt;idx)|ans)==ans))<font></font>
                f[i]=min(f[i],f[j]+<span class="hljs-number">1</span>); sum+=a[j];<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> f[n]&lt;=r;<font></font>
    }<font></font>
};<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
    RI i; <span class="hljs-keyword">for</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d"</span>,&amp;n,&amp;l,&amp;r),i=<span class="hljs-number">1</span>;i&lt;=n;++i) <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;a[i]);
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">40</span>;~i;--i) <span class="hljs-keyword">if</span> (!(n&lt;=<span class="hljs-number">100</span>?Case1::check(i):Case2::check(i))) ans|=(<span class="hljs-number">1L</span>L&lt;&lt;i);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>,ans),<span class="hljs-number">0</span>;<font></font>
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
                    <div class="am-g lg-main-content">
            <div class="am-u-md-4 am-u-lg-3 lg-right am-hide-sm">&nbsp;</div>
            <div class="am-u-md-8 am-u-lg-8 lg-right">
                <div class="lg-content-left">
                    <div class="lg-article am-g">
                        <div class="pagination-centered"><ul class="am-pagination am-pagination-centered"><li class="am-active"><a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a></li><li><a href="https://www.luogu.com.cn/problemnew/solution/P3646?page=2" data-ci-pagination-page="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a></li><li><a href="https://www.luogu.com.cn/problemnew/solution/P3646?page=2" data-ci-pagination-page="2" rel="next"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font></a></li></ul></div>
                    </div>
                </div>
            </div>
        </div>
    
    <link rel="stylesheet" href="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/markDownEditor.css">

    <div class="am-modal am-modal-prompt" tabindex="-1" id="report">
        <div class="am-modal-dialog">
            <div class="am-modal-hd"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反饋</font></font></div>
            <div class="am-modal-bd"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                如果你認為某個題解有問題，歡迎向洛谷反饋，以幫助更多的同學。
                </font></font><br><br>
                <select data-am-selected="{ btnStyle: &#39;secondary&#39;}" name="reason" style="display: none;">
                    <option value="排版不整齐"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">排版不整齊</font></font></option>
                    <option value="无意义内容"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無法令人理解的無意義內容</font></font></option>
                    <option value="违法内容"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">違法內容與有害信息</font></font></option>
                    <option value="抄袭"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抄襲等侵犯版權的內容</font></font></option>
                    <option value="其他"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他原因（請解釋）</font></font></option>
                </select><div class="am-selected am-dropdown " id="am-selected-rggz1" data-am-dropdown="">  <button type="button" class="am-selected-btn am-btn am-dropdown-toggle am-btn-secondary">    <span class="am-selected-status am-fl">排版不整齊</span>    <i class="am-selected-icon am-icon-caret-down"></i>  </button>  <div class="am-selected-content am-dropdown-content">    <h2 class="am-selected-header"><span class="am-icon-chevron-left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font></span></h2>       <ul class="am-selected-list">                     <li class="am-checked" data-index="0" data-group="0" data-value="排版不整齐">         <span class="am-selected-text">排版不整齊</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="1" data-group="0" data-value="无意义内容">         <span class="am-selected-text">無法令人理解的無意義內容</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="2" data-group="0" data-value="违法内容">         <span class="am-selected-text">違法內容與有害信息</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="3" data-group="0" data-value="抄袭">         <span class="am-selected-text">抄襲等侵犯版權的內容</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="4" data-group="0" data-value="其他">         <span class="am-selected-text">其他原因（請解釋）</span>         <i class="am-icon-check"></i></li>            </ul>    <div class="am-selected-hint"></div>  </div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                請具體說明理由，以增加反饋的可信度。
                </font></font><input type="text" class="am-modal-prompt-input" name="content">
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取消</font></font></span>
                <span class="am-modal-btn" data-am-modal-confirm=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確定</font></font></span>
            </div>
        </div>
    </div>


</div></main> <div data-v-7958fe72="" data-v-be2136da="" class="wrapper wrapped lfe-body"><div data-v-7958fe72="" class="background" style="background: rgb(51, 51, 51); filter: blur(0px) brightness(100%);"></div> <div data-v-da6e6574="" data-v-be2136da="" class="footer" data-v-7958fe72=""><img data-v-da6e6574="" src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/logo-single.png" class="logo-img"> <div data-v-da6e6574="" class="slogan"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    在洛谷，</font></font><br data-v-da6e6574=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    享受Coding的歡樂
  </font></font></div> <img data-v-da6e6574="" src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/wechat_qr.png" class="qr-img"> <div data-v-da6e6574="" class="info"><p data-v-da6e6574=""><a data-v-445f91a0="" data-v-da6e6574="" href="https://www.luogu.com.cn/blog/luogu/about-luogu" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        關於洛谷
      </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |
       </font></font><a data-v-445f91a0="" data-v-da6e6574="" href="https://www.luogu.com.cn/blog/luogu/luogu-help" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        幫助中心
      </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |
       </font></font><a data-v-445f91a0="" data-v-da6e6574="" href="https://www.luogu.com.cn/blog/luogu/luogu-EULA" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        用戶協議
      </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |
       </font></font><a data-v-445f91a0="" data-v-da6e6574="" href="https://www.luogu.com.cn/blog/luogu/contact-us" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        聯繫我們
       </font></font></a> <br data-v-da6e6574=""> <a data-v-445f91a0="" data-v-da6e6574="" href="https://www.luogu.com.cn/discuss/lists?forumname=miaomiaowu" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        小黑屋
      </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |
      </font></font><a data-v-445f91a0="" data-v-da6e6574="" href="https://www.luogu.com.cn/judgement" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        陶片放逐
      </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |
       </font></font><a data-v-445f91a0="" data-v-da6e6574="" href="https://www.luogu.com.cn/blog/luogu/social-rules" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        社區規則
      </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |
       </font></font><a data-v-445f91a0="" data-v-da6e6574="" href="https://www.lagou.com/gongsi/369082.html" target="_blank" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        招賢納才
      </font></font></a> <br data-v-da6e6574=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 

      2013-2020 , ©洛谷Developed by the
       </font></font><a data-v-445f91a0="" data-v-da6e6574="" href="https://github.com/luogu-dev" target="_blank" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        Luogu Dev Team
       </font></font></a> <br data-v-da6e6574=""> <a data-v-445f91a0="" data-v-da6e6574="" href="http://beian.miit.gov.cn/" target="_blank" class="color-default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        滬ICP備18008322號
      </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
      All rights reserved.
      </font></font></p></div></div></div></div></div>
<script>
    function scrollToId (id) {
        $('html, body').animate({
            scrollTop: ($('#' + id).offset().top)
        }, 500);
    }
</script>
<style>
    .lg-toolbar {
        display: none;
    }

    #app-old{
        display: block;
        margin-bottom: 2em;
        /* position: relative;*/
        box-sizing: border-box;
        max-width: 100%;
    }

    code {
        font-family: monospace, "Courier New";
    }

</style>


<div class="am-modal am-modal-alert" tabindex="-1" id="lg-alert">
    <div class="am-modal-dialog">
        <div class="am-modal-hd" id="lg-alert-title"></div>
        <div class="am-modal-bd" id="lg-alert-message"></div>
        <div class="am-modal-footer">
            <span class="am-modal-btn"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確定</font></font></span>
        </div>
    </div>
</div>

<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/ace.js"></script>

<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/vendor.js" data-manual=""></script>
<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/jsmind.js" data-manual=""></script>
<!--
<script src="https://cdn.luogu.com.cn/js/ajaxfileupload.js" data-manual></script>
<script src="https://cdn.luogu.com.cn/js/jquery.pjax.js" data-manual></script>
-->

<!--ajaxfileupload.js highlight.pack.js jquery.pjax.js markDownEditor.js poshytip.js qrcode.min.js-->

<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/amazeui.min.js"></script>
<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/highcharts.js"></script>
<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/highcharts-more.js"></script>
<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/katex.min.js"></script>
<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/auto-render.min.js"></script>
<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/markdown-palettes.min.js"></script>
<script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/luogu3.js"></script>
    <script>
        String.prototype.fmt = function() {
            var args = arguments;
            return this.replace(/%(\d+)/g, function(m, i) {
                return args[i];
            });
        };
    </script>

        <script>
        var currentCommentPage = {};
        function getComments($solutionBlock, pageForward, forcePage) {
            var children = $solutionBlock.children("div");
            var $comments = $(children[0]);
            var $commentsContainer = $comments.find("ul");

            var blogId = $solutionBlock.attr('data-blog-id');
            var currentPage = currentCommentPage.hasOwnProperty(blogId) ? currentCommentPage[blogId] : 1;
            currentPage = forcePage ? forcePage : (currentPage + pageForward);
            currentCommentPage[blogId] = currentPage;

            $(".am-icon-chevron-left,.am-icon-chevron-right").hide();
            $.get("/api/blog/replies/%0?page=%1".fmt(blogId, currentPage), function(resp) {
                $commentsContainer.attr('data-comment-count', resp.data.count);
                $commentsContainer.children("li").remove();
                if(currentPage !== 1) $(".am-icon-chevron-left").show();
                if(currentPage !== Math.ceil(resp.data.count / 10)) $(".am-icon-chevron-right").show();
                $(resp.data.result).each(function(i, comment) {
                    var commentElement = $("<li>").text(comment.Content).prepend("<br>").prepend(
                        $('<span class="lg-small">').text(comment.Author.Username)
                    );
                    commentElement.insertBefore($commentsContainer.children(".fadeout"));
                });
            });
        }

        $(".comment-page-switch").click(function() {
            var $e = $(this);
            var forward = parseInt($e.attr('data-forward'));
            getComments($e.closest(".solution-block"), forward);
        });

        $(document).ready(function() {
            $(".solution-block").each(function() {
                var children = $(this).children("div");
                var $solution = $(children[1]);
                var $comments = $(children[0]);
                var $commentsContainer = $comments.find("ul");
                var commentCount = parseInt($commentsContainer.attr('data-comment-count'));

                var heightDifference = $comments[0].offsetHeight - $solution[0].offsetHeight;

                if(heightDifference > 0) {
                    $commentsContainer.css('height', '%0px'.fmt($commentsContainer[0].offsetHeight + 4 - heightDifference))
                        .css("overflow", "hidden").css("cursor", "pointer");
                    $commentsContainer.children(".fadeout").show();
                    $commentsContainer.click(function() {
                        $commentsContainer.children(".fadeout").hide();
                        $commentsContainer.css('height', 'auto').css("overflow", "").css("cursor", "");
                        if(commentCount > 10) $comments.find(".am-icon-chevron-right").show();
                    });
                } else {
                    if(commentCount > 10) $comments.find(".am-icon-chevron-right").show();
                }
            });
        });

        $("[name=report]").click(function () {
            var reportID = $(this).attr('data-report-id');
            $('#report').modal({
                relatedTarget: this,
                onConfirm: function (e) {
                    var reason = $('[name=reason]').val();
                    var detail = $('[name=content]').val();

                    $.post('/api/report/blog', {
                        relevantID: reportID,
                        reason: reason + ' ' + detail
                    }, function (data) {
                        show_alert("提示", data.data);
                    });
                }
            });
        });
    </script>

<!--script src="//www.recaptcha.net/recaptcha/api.js?hl=zh-CN&render=explicit&onload=renderCaptcha" async defer></script-->


<div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/translate_24dp.png" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div><script src="./P3646 [APIO2015]巴厘島的雕塑題解- 洛谷_ 計算機科學教育新生態_files/z_stat.php"></script><div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>